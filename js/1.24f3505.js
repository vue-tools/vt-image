webpackJsonp([1],{4:function(s,t){"use strict";function a(){var s,t;return s=document.createElement("canvas"),t=s.getContext&&s.getContext("2d"),!!t&&(s.width=s.height=1,s.toDataURL("image/webp",.01).indexOf("image/webp")!=-1)}function n(s){return/^(\/\/|https?)/.test(s)}Object.defineProperty(t,"__esModule",{value:!0});var e=a();t.default={props:{lazy:{type:Boolean,default:!1},lazySrc:{type:String,default:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"},visibleRange:{type:[String,Number],default:window.innerHeight,validator:function(s){return s>50}},src:{type:String,required:!0}},data:function(){return{loading:this.lazy,path:this._getPath(e)}},computed:{realPath:function(){return this.loading?this.lazySrc:this.path}},methods:{_inVisibleArea:function(s,t){var a=void 0,n=void 0,e=void 0;return e=this.visibleRange,n=s.offsetTop,a=s.clientHeight,n-e<t&&t<n+e+a},lazyHandler:function(s){return!!this.lazy&&void(this._inVisibleArea(this.$el,s)&&this._lozyLoad())},_lozyLoad:function(){var s=this,t=void 0;t=new Image,t.src=this.path,t.onload=function(t){s.loading=!1}},_getPath:function(s){return n(this.src)?this.src:s?this.src+".webp":this.src}}}},8:function(s,t,a){t=s.exports=a(20)(),t.push([s.id,"",""])},9:function(s,t,a){var n=a(8);"string"==typeof n&&(n=[[s.id,n,""]]),n.locals&&(s.exports=n.locals);a(24)("a41b38f0",n,!0)},10:function(s,t,a){var n,e;a(9),n=a(4);var l=a(11);e=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(e=n=n.default),"function"==typeof e&&(e=e.options),e.render=l.render,e.staticRenderFns=l.staticRenderFns,s.exports=n},11:function(s,t){s.exports={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("img",{staticClass:"vt-image",attrs:{src:s.realPath}})},staticRenderFns:[]}},30:function(s,t,a){"use strict";function n(s){return s&&s.__esModule?s:{default:s}}Object.defineProperty(t,"__esModule",{value:!0});var e=a(10),l=n(e);t.default={data:function(){return{imgs:[a(72)]}},components:{Images:l.default},mounted:function(){this.lazyLoad(),window.addEventListener("scroll",this.lazyLoad.bind(this),!!this.supportPassiveEvents()&&{passive:!0})},methods:{lazyLoad:function(){var s=this;window.requestAnimationFrame=window.requestAnimationFrame||function(s){return setTimeout(s,1e3/60)},window.requestAnimationFrame(function(t){s.$refs.image.forEach(function(s){s.lazyHandler(document.body.scrollTop||document.documentElement.scrollTop)})})},supportPassiveEvents:function(){var s=!1;try{var t=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("test",null,t)}catch(s){}}}}},32:function(s,t,a){"use strict";function n(s){return s&&s.__esModule?s:{default:s}}Object.defineProperty(t,"__esModule",{value:!0});var e=a(86),l=n(e);t.default={components:{README:l.default}}},64:function(s,t,a){var n=a(77);"string"==typeof n&&(n=[[s.id,n,""]]);a(22)(n,{});n.locals&&(s.exports=n.locals)},72:function(s,t,a){s.exports=a.p+"img/logo.c2a605f.png"},77:function(s,t,a){t=s.exports=a(21)(),t.push([s.id,".img{width:100px;height:100px;margin:10px;display:block}",""])},86:function(s,t,a){var n,e;a(64),n=a(30);var l=a(95);e=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(e=n=n.default),"function"==typeof e&&(e=e.options),e.render=l.render,e.staticRenderFns=l.staticRenderFns,s.exports=n},88:function(s,t,a){var n,e;n=a(32);var l=a(94);e=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(e=n=n.default),"function"==typeof e&&(e=e.options),e.render=l.render,e.staticRenderFns=l.staticRenderFns,s.exports=n},94:function(s,t){s.exports={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("Layout",[a("README")],1)},staticRenderFns:[]}},95:function(s,t){s.exports={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("section",[a("h1",{attrs:{id:"vt-image"}},[s._v("vt-image")]),s._v(" "),s._m(0),s._v(" "),a("h2",{attrs:{id:"install"}},[s._v("Install")]),s._v(" "),s._m(1),a("h2",{attrs:{id:"usage"}},[s._v("Usage")]),s._v(" "),[s._l(s.imgs,function(s){return a("Images",{ref:"image",refInFor:!0,staticClass:"img",attrs:{src:s}})}),s._v(" "),s._l(s.imgs,function(s){return a("Images",{ref:"image",refInFor:!0,staticClass:"img",attrs:{lazy:"",src:s}})})],s._v(" "),s._m(2)],2)},staticRenderFns:[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("基于 vue 2 封装出的 Image 组件，重写img，目的支持webp， 优化图片，提高移动端性能。 点击查看"),a("a",{attrs:{href:"https://vue-tools.github.io/vt-image/#/demo"}},[s._v("Demo")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"lang-javascript"},[a("code",[s._v("npm i vt-"),a("span",{staticClass:"hljs-built_in"},[s._v("image")]),s._v(" -S\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" Images from "),a("span",{staticClass:"hljs-string"},[s._v("'vt-image'")]),s._v("\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("// global install")]),s._v("\nVue.component("),a("span",{staticClass:"hljs-string"},[s._v("'Images'")]),s._v(", Images)\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("// scope install")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-built_in"},[s._v("default")]),s._v(" {\n    components: { \n        Images\n    }\n}")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"lang-example"},[a("code",[a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("style")]),s._v(">")]),a("span",{staticClass:"css"},[s._v("\n"),a("span",{staticClass:"hljs-selector-class"},[s._v(".img")]),a("span",{staticClass:"hljs-template-variable"},[s._v("{")]),s._v("\n    "),a("span",{staticClass:"hljs-attribute"},[s._v("width")]),s._v(": "),a("span",{staticClass:"hljs-number"},[s._v("100px")]),s._v(";\n    "),a("span",{staticClass:"hljs-attribute"},[s._v("height")]),s._v(": "),a("span",{staticClass:"hljs-number"},[s._v("100px")]),s._v(";\n    "),a("span",{staticClass:"hljs-attribute"},[s._v("margin")]),s._v(":"),a("span",{staticClass:"hljs-number"},[s._v("10px")]),s._v("; \n    "),a("span",{staticClass:"hljs-attribute"},[s._v("display")]),s._v(": block;\n"),a("span",{staticClass:"hljs-template-variable"},[s._v("}")]),s._v("\n")]),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("style")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("template")]),s._v(">")]),s._v("\n    "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("Images")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("ref")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"image"')]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("v-for")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"img in imgs"')]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("class")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"img"')]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v(":src")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"img"')]),s._v(" />")]),s._v("\n    "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("Images")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("ref")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"image"')]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("v-for")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"img in imgs"')]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("class")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"img"')]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("lazy")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v(":src")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"img"')]),s._v(" />")]),s._v(" \n"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("template")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")]),a("span",{staticClass:"javascript"},[s._v("\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" Images "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vt-image'")]),s._v("\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" "),a("span",{staticClass:"hljs-template-variable"},[s._v("{")]),s._v("\n        data()"),a("span",{staticClass:"hljs-template-variable"},[s._v("{")]),s._v("\n            "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-template-variable"},[s._v("{")]),s._v("\n                "),a("span",{staticClass:"hljs-attr"},[s._v("imgs")]),s._v(": [\n                    "),a("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v("'assets/logo.png'")]),s._v(")\n                ]\n            "),a("span",{staticClass:"hljs-template-variable"},[s._v("}")]),s._v("\n        "),a("span",{staticClass:"hljs-template-variable"},[s._v("}")]),s._v(",\n        "),a("span",{staticClass:"hljs-attr"},[s._v("components")]),s._v(": "),a("span",{staticClass:"hljs-template-variable"},[s._v("{")]),s._v("\n            Images\n        "),a("span",{staticClass:"hljs-template-variable"},[s._v("}")]),s._v(",\n        mounted()"),a("span",{staticClass:"hljs-template-variable"},[s._v("{")]),s._v("\n             "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".lazyLoad()\n             "),a("span",{staticClass:"hljs-built_in"},[s._v("window")]),s._v(".addEventListener("),a("span",{staticClass:"hljs-string"},[s._v("'scroll'")]),s._v(", "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".lazyLoad.bind("),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v("), "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".supportPassiveEvents() ? "),a("span",{staticClass:"hljs-template-variable"},[s._v("{")]),a("span",{staticClass:"hljs-attr"},[s._v("passive")]),s._v(": "),a("span",{staticClass:"hljs-literal"},[s._v("true")]),a("span",{staticClass:"hljs-template-variable"},[s._v("}")]),s._v(" : "),a("span",{staticClass:"hljs-literal"},[s._v("false")]),s._v(")\n        "),a("span",{staticClass:"hljs-template-variable"},[s._v("}")]),s._v(",\n        "),a("span",{staticClass:"hljs-attr"},[s._v("methods")]),s._v(": "),a("span",{staticClass:"hljs-template-variable"},[s._v("{")]),s._v("\n            lazyLoad() "),a("span",{staticClass:"hljs-template-variable"},[s._v("{")]),s._v("\n                "),a("span",{staticClass:"hljs-built_in"},[s._v("window")]),s._v(".requestAnimationFrame = "),a("span",{staticClass:"hljs-built_in"},[s._v("window")]),s._v(".requestAnimationFrame || ("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("fn")]),s._v(" =>")]),s._v(" setTimeout(fn, "),a("span",{staticClass:"hljs-number"},[s._v("1000")]),s._v(" / "),a("span",{staticClass:"hljs-number"},[s._v("60")]),s._v("))\n                "),a("span",{staticClass:"hljs-built_in"},[s._v("window")]),s._v(".requestAnimationFrame("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("_")]),s._v(" =>")]),s._v(" "),a("span",{staticClass:"hljs-template-variable"},[s._v("{")]),s._v("\n                    "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".$refs.image.forEach("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("img")]),s._v(" =>")]),s._v(" "),a("span",{staticClass:"hljs-template-variable"},[s._v("{")]),s._v("\n                        img.lazyHandler("),a("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".body.scrollTop || "),a("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".documentElement.scrollTop)\n                    "),a("span",{staticClass:"hljs-template-variable"},[s._v("}")]),s._v(")\n                "),a("span",{staticClass:"hljs-template-variable"},[s._v("}")]),s._v(")\n            "),a("span",{staticClass:"hljs-template-variable"},[s._v("}")]),s._v(",\n            supportPassiveEvents()"),a("span",{staticClass:"hljs-template-variable"},[s._v("{")]),s._v("\n                "),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" supportsPassiveOption = "),a("span",{staticClass:"hljs-literal"},[s._v("false")]),s._v("\n                "),a("span",{staticClass:"hljs-keyword"},[s._v("try")]),s._v(" "),a("span",{staticClass:"hljs-template-variable"},[s._v("{")]),s._v("\n                    "),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" opts = "),a("span",{staticClass:"hljs-built_in"},[s._v("Object")]),s._v(".defineProperty("),a("span",{staticClass:"hljs-template-variable"},[s._v("{")]),a("span",{staticClass:"hljs-template-variable"},[s._v("}")]),s._v(", "),a("span",{staticClass:"hljs-string"},[s._v("'passive'")]),s._v(", "),a("span",{staticClass:"hljs-template-variable"},[s._v("{")]),s._v("\n                        "),a("span",{staticClass:"hljs-attr"},[s._v("get")]),s._v(": "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") ")]),a("span",{staticClass:"hljs-template-variable"},[s._v("{")]),s._v("\n                            supportsPassiveOption = "),a("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v("\n                        "),a("span",{staticClass:"hljs-template-variable"},[s._v("}")]),s._v("\n                    "),a("span",{staticClass:"hljs-template-variable"},[s._v("}")]),s._v(")\n                    "),a("span",{staticClass:"hljs-built_in"},[s._v("window")]),s._v(".addEventListener("),a("span",{staticClass:"hljs-string"},[s._v("'test'")]),s._v(", "),a("span",{staticClass:"hljs-literal"},[s._v("null")]),s._v(", opts)\n                "),a("span",{staticClass:"hljs-template-variable"},[s._v("}")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("catch")]),s._v(" (e) "),a("span",{staticClass:"hljs-template-variable"},[s._v("{")]),a("span",{staticClass:"hljs-template-variable"},[s._v("}")]),s._v("\n            "),a("span",{staticClass:"hljs-template-variable"},[s._v("}")]),s._v("\n        "),a("span",{staticClass:"hljs-template-variable"},[s._v("}")]),s._v("\n    "),a("span",{staticClass:"hljs-template-variable"},[s._v("}")]),s._v("\n")]),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")])])])}]}}});